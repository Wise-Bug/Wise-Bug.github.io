<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">



<title>Go语言学习笔记 | Wise-Bug</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Home</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Home</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Go语言学习笔记</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Wise-Ant</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">八月 21, 2019&nbsp;&nbsp;21:16:10</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="Go-语言学习笔记"><a href="#Go-语言学习笔记" class="headerlink" title="Go 语言学习笔记"></a>Go 语言学习笔记</h1><hr>
<p><img src="/2019/08/21/Go语言学习笔记/Go's-mascot.png" alt></p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>这里我想先介绍一下我学习 Go 语言的初衷，在 2019 秋招的时候，我接到了很多非常不错的面试机会，但由于我的计算机网络和操作系统的基础有点差（本人在校期间参加 ACM 竞赛，所以数据结构和算法并不是我的弱点），这些机会都从我的手中溜走，面经中的确有很多关于这方面的专题，但不知道为什么，总是说服不了自己去背下来（可能就是懒），在左右思量之后，决定放弃秋招，踏踏实实的补习一下这方面的知识。</p>
<p>之所以借助 Go 语言来深刻理解计算机网络和操作系统，我也是经过多方面考虑的（至于这条道路选的合不合适，我也不知道）：</p>
<ul>
<li>我在找工作时选的是后端方向，语言选的是 C++，但是我对C++ 某些语言特性的理解真的是惨不忍睹（甚至上升到“三观不和”地步），我分析原因：可能是对语言特性所面对的问题场景，没有什么直观的感受。这种问题场景的缺失，在学习时是很致命的，光背概念，抓不到核心问题，费时费力，性价比太低；</li>
<li>在面试的时候，不只一次听到大厂们（腾讯、字节、美团……）或多或少在使用 Go 语言，而且貌似培训机构对于 Go 语言的培训还不是很多，似乎有个空子（陷阱）等我去钻（掉）；</li>
<li>C++ 关于初学项目的太少太老太难了，Go 语言比较简单（目前来看，且侧重点也正是我所想要学习的操作系统和计算机网络），找资料参考时应该比较方便，还有一点，也是最重要的一点，我实在搞不明白、甚至有点排斥 C++ 的内存管理机制，而且对于内存、并发等教程，网上的资料实在不敢恭维（除了针对面经所介绍的，关于具体场景的运用也很少），而 Go 语言直接在其官方文档中写的很清楚。</li>
</ul>
<h2 id="语言特性"><a href="#语言特性" class="headerlink" title="语言特性"></a>语言特性</h2><h3 id="1-编译型语言"><a href="#1-编译型语言" class="headerlink" title="1.编译型语言"></a>1.编译型语言</h3><p>Go 使用编译器来编译代码。编译器将源代码编译成二进制（或字节码）格式；在编译代码时，编译器检查错误、优化性能并输出可在不同平台上运行的二进制文件。要创建并运行 Go 程序，程序员必须执行如下步骤。</p>
<ol>
<li>使用文本编辑器创建 Go 程序；</li>
<li>保存文件；</li>
<li>编译程序；</li>
<li>运行编译得到的可执行文件。</li>
</ol>
<p>Go 自带了编译器，无须单独安装编译器。</p>
<h3 id="2-优势"><a href="#2-优势" class="headerlink" title="2.优势"></a>2.优势</h3><ul>
<li><p>Go语言在：编译速度、执行效率、开发难度，这 3 个条件之间做到了最佳的平衡。</p>
</li>
<li><p>Go语言支持交叉编译，你可以在运行 <strong>Linux</strong> 系统的计算机上开发可以在 <strong>Windows</strong> 上运行的应用程序。</p>
</li>
<li><p>Go 语言是第一门完全支持 UTF-8 的编程语言，这不仅体现在它可以处理使用 UTF-8 编码的字符串，就连它的源码文件格式都是使用的 UTF-8 编码。</p>
</li>
<li><p>Go语言从本质上（程序和结构方面） 来实现并发编程。</p>
</li>
<li><p>Go语言没有类和继承的概念，它通过接口（interface）的概念来实现多态性。</p>
</li>
<li><p>Go语言有一个清晰易懂的轻量级类型系统， 在类型之间也没有层级之说。 因此可以说Go语言是一门混合型的语言。</p>
</li>
<li><p>Go语言的语法规则严谨，没有歧义，更没什么花里胡哨的用法。</p>
</li>
<li><p>并发模型：Go语言的并发是基于 goroutine 的，goroutine 类似于线程，但并非线程。可以将 goroutine 理解为一种虚拟线程。Go语言运行时会参与调度 goroutine，并将 goroutine 合理地分配到每个 CPU 中，最大限度地使用 CPU 性能。</p>
</li>
<li><p>内存分配：Go 选择了 tcmalloc，它本就是为并发而设计的高性能内存分配组件。</p>
</li>
<li><p>垃圾回收：当前版本的垃圾回收算法也只能说堪用，离好用尚有不少距离。</p>
</li>
<li><p>静态链接…</p>
</li>
<li><p>标准库：Go 标准库虽称不得完全覆盖，但也算极为丰富。</p>
</li>
<li><p>工具链：完整的工具链对于日常开发极为重要。Go 在此做得相当不错，无论是编译、格式化、错误检查、帮助文档，还是第三方包下载、更新都有对应的工具。其功能未必完善，但起码算得上简单易用。</p>
</li>
</ul>
<h3 id="3-Go语言开发的相关项目"><a href="#3-Go语言开发的相关项目" class="headerlink" title="3.Go语言开发的相关项目"></a>3.Go语言开发的相关项目</h3><ul>
<li><p>Docker</p>
<p>  Docker 是一种操作系统层面的虚拟化技术，可以在操作系统和应用程序之间进行隔离，也可以称之为容器。Docker 可以在一台物理服务器上快速运行一个或多个实例。例如，启动一个 CentOS 操作系统，并在其内部命令行执行指令后结束，整个过程就像自己在操作系统一样高效。</p>
<p>  项目链接：<a href="https://github.com/docker/docker" target="_blank" rel="noopener">https://github.com/docker/docker</a></p>
</li>
<li><h2 id="Go语言"><a href="#Go语言" class="headerlink" title="Go语言"></a>Go语言</h2><p>  Go语言自己的早期源码使用C语言和汇编语言写成。从 Go 1.5 版本后，完全使用Go语言自身进行编写。</p>
<p>  项目链接：<a href="https://github.com/golang/go" target="_blank" rel="noopener">https://github.com/golang/go</a></p>
</li>
<li><h2 id="beego"><a href="#beego" class="headerlink" title="beego"></a>beego</h2><p>  beego 是一个类似 Python 的 Tornado 框架，采用了 RESTFul 的设计思路，使用Go语言编写的一个极轻量级、高可伸缩性和高性能的 Web 应用框架。</p>
<p>  项目链接：<a href="https://github.com/astaxie/beego" target="_blank" rel="noopener">https://github.com/astaxie/beego</a></p>
</li>
</ul>
<h3 id="4-Go语言适合做什么"><a href="#4-Go语言适合做什么" class="headerlink" title="4.Go语言适合做什么"></a>4.Go语言适合做什么</h3><p>目前国外很多云平台都是采用Go语言开发的。</p>
<ul>
<li>服务器编程，以前大家如果使用 C 或者 <a href="http://c.biancheng.net/cplus/" target="_blank" rel="noopener">C++</a> 做的那些事情，用 Go 来做也很合适，例如处理日志、数据打包、虚拟机处理、文件系统等。</li>
<li>分布式系统、数据库代理器、中间件等，例如 Etcd。</li>
<li>网络编程，这一块目前应用最广，包括 Web 应用、API 应用、下载应用，而且 Go 内置的 net/http 包基本上把我们平常用到的网络功能都实现了。</li>
<li>数据库操作</li>
<li>开发云平台，目前国外很多云平台在采用 Go 开发</li>
</ul>
<p>使用Go语言原生开发项目的出现。</p>
<ul>
<li>云计算基础设施领域，代表项目：docker、kubernetes、etcd、consul、cloudflare CDN、七牛云存储等。</li>
<li>基础软件，代表项目：tidb、influxdb、cockroachdb 等。</li>
<li>微服务，代表项目：go-kit、micro、monzo bank 的 typhon、bilibili 等。</li>
<li>互联网基础设施，代表项目：以太坊、hyperledger 等。</li>
</ul>
<h3 id="5-Go语言四个编译阶段"><a href="#5-Go语言四个编译阶段" class="headerlink" title="5.Go语言四个编译阶段"></a>5.Go语言四个编译阶段</h3><p>Go的编译器在逻辑上可以被分成四个阶段：</p>
<ul>
<li>词法与语法分析</li>
<li>类型检查</li>
<li>中间代码生成</li>
<li>机器代码生成</li>
</ul>
<h3 id="6-Go语言工程结构"><a href="#6-Go语言工程结构" class="headerlink" title="6.Go语言工程结构"></a>6.Go语言工程结构</h3><p><strong>Go语言</strong>是一门推崇软件工程理念的编程语言，它为开发周期的每个环节都提供了完备的工具和支持。Go语言高度强调代码和项目的规范和统一，这集中体现在工程结构或者说代码体制的细节之处。接下来我们来详述Go语言的工程结构。</p>
<h4 id="1-工作区"><a href="#1-工作区" class="headerlink" title="(1) 工作区"></a>(1) 工作区</h4><p>一般情况下，Go语言的源码文件必须放在工作区中。对于命令源码文件来说，这不是必需的。</p>
<p>工作区其实就是一个对应于特定工程的目录，它应包含 3 个子目录：<strong>src 目录</strong>、<strong>pkg 目录</strong> 和 <strong>bin 目录</strong>。</p>
<h4 id="2-GOPATH"><a href="#2-GOPATH" class="headerlink" title="(2) GOPATH"></a>(2) GOPATH</h4><h4 id="3-源码文件"><a href="#3-源码文件" class="headerlink" title="(3) 源码文件"></a>(3) 源码文件</h4><h4 id="4-包的概念、导入与可见性"><a href="#4-包的概念、导入与可见性" class="headerlink" title="(4) 包的概念、导入与可见性"></a>(4) 包的概念、导入与可见性</h4><p>你必须在源文件中的第一行（非注释）来指明这个文件属于哪个包，如：<code>package main</code>。</p>
<p>所有包名都应该使用小写字母。</p>
<p><code>package main</code>表示一个可独立执行的程序，每个 Go 应用程序都包含一个名为 <code>main</code>的包。</p>
<p>一个应用程序可以包含不同的包，而且即时你只使用 <code>main</code>包也不必把所有的代码都写在一个巨大的文件里：你可以用一些较小的文件，并且在每个文件中的第一行都使用 <code>package main</code>来指明这些文件都属于 <code>main</code> 包。</p>
<p>如果你打算编译包名不是 <code>main</code>的源文件，如<code>pack1</code>，编译后产生的对象文件将会是<code>pack1.a</code>而不是可执行程序。</p>
<h2 id="实用语法查询"><a href="#实用语法查询" class="headerlink" title="实用语法查询"></a>实用语法查询</h2><p>Go语言语法类似于C语言，C语言的有些语法会让代码可读性降低甚至发生歧义。Go语言在C语言的基础上取其精华，弃其糟粕，将C语言中较为容易发生错误的写法进行调整，做出相应的编译提示。</p>
<ul>
<li><p><strong>去掉表达式冗余括号</strong></p>
</li>
<li><p><strong>强制的代码风格</strong></p>
<p>  Go语言中，左括号必须紧接着语句不换行。其他样式的括号将被视为代码编译错误。这个特性刚开始会使开发者有一些不习惯，但随着对Go语言的不断熟悉，开发者就会发现风格统一让大家在阅读代码时把注意力集中到了解决问题上，而不是代码风格上。</p>
<p>  同时Go语言也提供了一套格式化工具。一些Go语言的开发环境或者编辑器在保存时，都会使用格式化工具对代码进行格式化，让代码提交时已经是统一格式的代码。</p>
</li>
</ul>
<h3 id="0-标准库"><a href="#0-标准库" class="headerlink" title="0. 标准库"></a>0. 标准库</h3><p>下表列出了Go语言标准库中常见的包及其功能。</p>
<table>
<thead>
<tr>
<th>Go语言标准库包名</th>
<th>功  能</th>
</tr>
</thead>
<tbody><tr>
<td>bufio</td>
<td>带缓冲的 I/O 操作</td>
</tr>
<tr>
<td>bytes</td>
<td>实现字节操作</td>
</tr>
<tr>
<td>container</td>
<td>封装堆、列表和环形列表等容器</td>
</tr>
<tr>
<td>crypto</td>
<td>加密算法</td>
</tr>
<tr>
<td>database</td>
<td>数据库驱动和接口</td>
</tr>
<tr>
<td>debug</td>
<td>各种调试文件格式访问及调试功能</td>
</tr>
<tr>
<td>encoding</td>
<td>常见算法如 JSON、XML、Base64 等</td>
</tr>
<tr>
<td>flag</td>
<td>命令行解析</td>
</tr>
<tr>
<td>fmt</td>
<td>格式化操作</td>
</tr>
<tr>
<td>go</td>
<td>Go语言的词法、语法树、类型等。可通过这个包进行代码信息提取和修改</td>
</tr>
<tr>
<td>html</td>
<td>HTML 转义及模板系统</td>
</tr>
<tr>
<td>image</td>
<td>常见图形格式的访问及生成</td>
</tr>
<tr>
<td>io</td>
<td>实现 I/O 原始访问接口及访问封装</td>
</tr>
<tr>
<td>math</td>
<td>数学库</td>
</tr>
<tr>
<td>net</td>
<td>网络库，支持 Socket、HTTP、邮件、RPC、SMTP 等</td>
</tr>
<tr>
<td>os</td>
<td>操作系统平台不依赖平台操作封装</td>
</tr>
<tr>
<td>path</td>
<td>兼容各操作系统的路径操作实用函数</td>
</tr>
<tr>
<td>plugin</td>
<td>Go 1.7 加入的插件系统。支持将代码编译为插件，按需加载</td>
</tr>
<tr>
<td>reflect</td>
<td>语言反射支持。可以动态获得代码中的类型信息，获取和修改变量的值</td>
</tr>
<tr>
<td>regexp</td>
<td>正则表达式封装</td>
</tr>
<tr>
<td>runtime</td>
<td>运行时接口</td>
</tr>
<tr>
<td>sort</td>
<td>排序接口</td>
</tr>
<tr>
<td>strings</td>
<td>字符串转换、解析及实用函数</td>
</tr>
<tr>
<td>time</td>
<td>时间接口</td>
</tr>
<tr>
<td>text</td>
<td>文本模板及 Token 词法器</td>
</tr>
</tbody></table>
<h3 id="1-命名规则"><a href="#1-命名规则" class="headerlink" title="1.  命名规则"></a>1.  命名规则</h3><h4 id="lt-0-gt-文件名"><a href="#lt-0-gt-文件名" class="headerlink" title="&lt;0&gt; 文件名"></a>&lt;0&gt; 文件名</h4><p>Go 的源文件以 <code>.go</code> 为后缀名存储在计算机中，这些文件名 <strong>均由小写字母</strong> 组成，如 <code>test.go</code> 。如果文件名由多个部分组成，则使用下划线 <code>_</code> 对它们进行分隔，如 <code>scanner_test.go</code> 。文件名不包含空格或其他特殊字符。</p>
<h4 id="lt-1-gt-标识符（变量名）"><a href="#lt-1-gt-标识符（变量名）" class="headerlink" title="&lt;1&gt; 标识符（变量名）"></a>&lt;1&gt; 标识符（变量名）</h4><p>有效的标识符必须以字母（可以使用任何 UTF-8 编码的字符或 <code>_</code>）开头，然后紧跟着 0 个或多个字符或 Unicode 数字，如：X56、group1、_x23、i、өԑ12。</p>
<h3 id="2-基本类型"><a href="#2-基本类型" class="headerlink" title="2. 基本类型"></a>2. 基本类型</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span>     <span class="comment">// 布尔类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">string</span>   <span class="comment">// 字符串类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>  <span class="keyword">int8</span>  <span class="keyword">int16</span>  <span class="keyword">int32</span>  <span class="keyword">int64</span>              <span class="comment">// 整数型</span></span><br><span class="line"><span class="keyword">uint</span> <span class="keyword">uint8</span> <span class="keyword">uint16</span> <span class="keyword">uint32</span> <span class="keyword">uint64</span> <span class="keyword">uintptr</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">float32</span>   <span class="keyword">float64</span>      <span class="comment">// 浮点型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span> <span class="comment">// uint8 的别名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">rune</span> <span class="comment">// int32 的别名</span></span><br><span class="line">     <span class="comment">// 表示一个 Unicode 码点</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">complex64</span> <span class="keyword">complex128</span>   <span class="comment">//  复数类型</span></span><br></pre></td></tr></table></figure>

<p>Go语言和许多编程语言不同，它在声明变量时将变量的类型放在变量的名称之后。这样做的好处就是可以避免像C语言中那样含糊不清的声明形式，例如：<code>int* a, b;</code> 。其中只有 a 是指针而 b 不是。如果你想要这两个变量都是指针，则需要将它们分开书写。而在 Go 中，则可以和轻松地将它们都声明为指针类型：<code>var a, b *int</code>没有歧义。</p>
<h4 id="lt-0-gt-初始化"><a href="#lt-0-gt-初始化" class="headerlink" title="&lt;0&gt; 初始化"></a>&lt;0&gt; 初始化</h4><p>当一个变量被声明之后，所有的内存在 Go 中都是经过初始化的，系统自动赋予它该类型的零值：</p>
<ul>
<li><p>int 为 0</p>
</li>
<li><p>float 为 0.0</p>
</li>
<li><p>bool 为 false</p>
</li>
<li><p>string 为空字符串</p>
</li>
<li><p>指针、切片、函数变量的默认值为 nil </p>
</li>
</ul>
<h4 id="lt-1-gt-声明变量"><a href="#lt-1-gt-声明变量" class="headerlink" title="&lt;1&gt;  声明变量"></a>&lt;1&gt;  声明变量</h4><ul>
<li><p><strong>标准格式</strong>：声明变量的一般形式是使用 var 关键字：</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name <span class="keyword">type</span></span><br></pre></td></tr></table></figure>

<p>  其中，var 是声明变量的关键字，name 是变量名，type 是变量的类型，行尾无须分号。</p>
</li>
</ul>
<ul>
<li><p><strong>批量格式</strong>：使用关键字 var 和括号，可以将一组变量定义放在一起。</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="keyword">int</span></span><br><span class="line">    b <span class="keyword">string</span></span><br><span class="line">    c []<span class="keyword">float32</span></span><br><span class="line">    d <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">bool</span></span></span><br><span class="line"><span class="function">    <span class="title">e</span> <span class="title">struct</span></span> &#123;</span><br><span class="line">        x <span class="keyword">int</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>简短格式：</strong>可使用更加简短的变量定义和初始化语法</p>
  <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">名字 := 表达式</span><br><span class="line">i, j := <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   x:=<span class="number">100</span></span><br><span class="line">   a,s:=<span class="number">1</span>, <span class="string">"abc"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  需要注意的是，简短模式有以下限制：</p>
<ul>
<li>定义变量，同时显式初始化</li>
<li>不能提供数据类型</li>
<li><strong>只能用在函数内部</strong></li>
</ul>
</li>
</ul>
<h4 id="lt-2-gt-匿名变量"><a href="#lt-2-gt-匿名变量" class="headerlink" title="&lt;2&gt; 匿名变量"></a>&lt;2&gt; 匿名变量</h4><p>为了增加代码的灵活性，而产生了匿名变量。</p>
<p>匿名变量的特点是一个下画线<code>_</code>，<code>_</code>本身就是一个特殊的标识符，被称为空白标识符。</p>
<p>匿名变量不占用内存空间，不会分配内存。匿名变量与匿名变量之间也不会因为多次声明而无法使用。</p>
<h3 id="3-常用语法"><a href="#3-常用语法" class="headerlink" title="3. 常用语法"></a>3. 常用语法</h3><h4 id="lt-1-gt-for-循环"><a href="#lt-1-gt-for-循环" class="headerlink" title="&lt;1&gt; for 循环"></a>&lt;1&gt; for 循环</h4><p>for 两边的括号被去掉，int 声明被简化为<code>:=</code>，直接通过编译器右值推导获得 a 的变量类型并声明。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> a := <span class="number">0</span>;a&lt;<span class="number">10</span>;a++&#123;</span><br><span class="line">    <span class="comment">// 循环代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="lt-2-gt-if-判断"><a href="#lt-2-gt-if-判断" class="headerlink" title="&lt;2&gt; if 判断"></a>&lt;2&gt; if 判断</h4><p>在Go语言中，无须添加表达式括号，代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式&#123;</span><br><span class="line">    <span class="comment">// 表达式成立</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="lt-3-gt-i-和-i"><a href="#lt-3-gt-i-和-i" class="headerlink" title="&lt;3&gt; i++ 和 ++i"></a>&lt;3&gt; i++ 和 ++i</h4><p>Go语言中自增只有一种写法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">i++</span><br></pre></td></tr></table></figure>

<p>如果写成前置自增<code>++i</code>，或者赋值后自增<code>a=i++</code>都将导致编译错误。</p>
<h4 id="lt-4-gt-函数"><a href="#lt-4-gt-函数" class="headerlink" title="&lt;4&gt; 函数"></a>&lt;4&gt; 函数</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x <span class="keyword">int</span>, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(add(<span class="number">42</span>, <span class="number">13</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Wise-Ant</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="/2019/08/21/Go语言学习笔记/">/2019/08/21/Go语言学习笔记/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2019/08/21/SONNIE-S-ENGE/">SONNIE'S EDGE</a>
            
            
            <a class="next" rel="next" href="/2019/08/21/C-基础技巧/">C++基础技巧</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Wise-Ant | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
